<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
<title>Cappuccino: AppKit/CPToolbar.j Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.5.9-20090622 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false);
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" 
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange()"/>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>AppKit/CPToolbar.j</h1><a href="_c_p_toolbar_8j.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * CPToolbar.j</span>
<a name="l00003"></a>00003 <span class="comment"> * AppKit</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Portions based on NSToolbar.m (11/10/2008) in Cocotron (http://www.cocotron.org/)</span>
<a name="l00006"></a>00006 <span class="comment"> * Copyright (c) 2006-2007 Christopher J. W. Lloyd</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * Created by Francisco Tolmasky.</span>
<a name="l00009"></a>00009 <span class="comment"> * Copyright 2008, 280 North, Inc.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * This library is free software; you can redistribute it and/or</span>
<a name="l00012"></a>00012 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00013"></a>00013 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00014"></a>00014 <span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * This library is distributed in the hope that it will be useful,</span>
<a name="l00017"></a>00017 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00018"></a>00018 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span>
<a name="l00019"></a>00019 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00022"></a>00022 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
<a name="l00023"></a>00023 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span>
<a name="l00024"></a>00024 <span class="comment"> */</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 @<span class="keyword">import</span> &lt;Foundation/<a class="code" href="class_c_p_object.html">CPObject</a>.j&gt;
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 @<span class="keyword">import</span> <span class="stringliteral">&quot;CPPopUpButton.j&quot;</span>
<a name="l00029"></a>00029 @<span class="keyword">import</span> <span class="stringliteral">&quot;CPToolbarItem.j&quot;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">/*</span>
<a name="l00033"></a>00033 <span class="comment">    @global</span>
<a name="l00034"></a>00034 <span class="comment">    @group CPToolbarDisplayMode</span>
<a name="l00035"></a>00035 <span class="comment">*/</span>
<a name="l00036"></a><a class="code" href="_c_p_toolbar_8j.html#a22c202c113c08e11d05c51c2ef01cffe">00036</a> <a class="code" href="_c_p_toolbar_8j.html#a22c202c113c08e11d05c51c2ef01cffe">CPToolbarDisplayModeDefault</a>             = 0;
<a name="l00037"></a>00037 <span class="comment">/*</span>
<a name="l00038"></a>00038 <span class="comment">    @global</span>
<a name="l00039"></a>00039 <span class="comment">    @group CPToolbarDisplayMode</span>
<a name="l00040"></a>00040 <span class="comment">*/</span>
<a name="l00041"></a><a class="code" href="_c_p_toolbar_8j.html#aeea814059bdc24bcd650c9a75194e7cb">00041</a> <a class="code" href="_c_p_toolbar_8j.html#aeea814059bdc24bcd650c9a75194e7cb">CPToolbarDisplayModeIconAndLabel</a>        = 1;
<a name="l00042"></a>00042 <span class="comment">/*</span>
<a name="l00043"></a>00043 <span class="comment">    @global</span>
<a name="l00044"></a>00044 <span class="comment">    @group CPToolbarDisplayMode</span>
<a name="l00045"></a>00045 <span class="comment">*/</span>
<a name="l00046"></a><a class="code" href="_c_p_toolbar_8j.html#a556472e8d5e06b03d8093ed27bc791d4">00046</a> <a class="code" href="_c_p_toolbar_8j.html#a556472e8d5e06b03d8093ed27bc791d4">CPToolbarDisplayModeIconOnly</a>            = 2;
<a name="l00047"></a>00047 <span class="comment">/*</span>
<a name="l00048"></a>00048 <span class="comment">    @global</span>
<a name="l00049"></a>00049 <span class="comment">    @group CPToolbarDisplayMode</span>
<a name="l00050"></a>00050 <span class="comment">*/</span>
<a name="l00051"></a><a class="code" href="_c_p_toolbar_8j.html#a58c4af7318aabb4443ab08c1c05c2686">00051</a> <a class="code" href="_c_p_toolbar_8j.html#a58c4af7318aabb4443ab08c1c05c2686">CPToolbarDisplayModeLabelOnly</a>           = 3;
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="_c_p_toolbar_8j.html#aa23158e884bab0d67ff519f2abab8f23">00053</a> var <a class="code" href="_c_p_toolbar_8j.html#aa23158e884bab0d67ff519f2abab8f23">CPToolbarsByIdentifier</a>              = nil;
<a name="l00054"></a><a class="code" href="_c_p_toolbar_8j.html#ac944978bcf3d19990ce9bb0c430a194f">00054</a> var <a class="code" href="_c_p_toolbar_8j.html#ac944978bcf3d19990ce9bb0c430a194f">CPToolbarConfigurationsByIdentifier</a> = nil;
<a name="l00055"></a>00055 
<a name="l00083"></a><a class="code" href="class_c_p_toolbar.html">00083</a> <span class="keyword">@implementation </span><a class="code" href="class_c_p_toolbar.html">CPToolbar</a> : <a class="code" href="class_c_p_object.html">CPObject</a>
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085     <a class="code" href="class_c_p_string.html">CPString</a>                _identifier;
<a name="l00086"></a>00086     CPToolbarDisplayMode    _displayMode;
<a name="l00087"></a>00087     BOOL                    _showsBaselineSeparator;
<a name="l00088"></a>00088     BOOL                    _allowsUserCustomization;
<a name="l00089"></a>00089     BOOL                    _isVisible;
<a name="l00090"></a>00090     
<a name="l00091"></a>00091     <span class="keywordtype">id</span>                      _delegate;
<a name="l00092"></a>00092     
<a name="l00093"></a>00093     <a class="code" href="class_c_p_array.html">CPArray</a>                 _itemIdentifiers;
<a name="l00094"></a>00094     
<a name="l00095"></a>00095     <a class="code" href="class_c_p_dictionary.html">CPDictionary</a>            _identifiedItems;
<a name="l00096"></a>00096     <a class="code" href="class_c_p_array.html">CPArray</a>                 _defaultItems;
<a name="l00097"></a>00097     <a class="code" href="class_c_p_array.html">CPArray</a>                 _allowedItems;
<a name="l00098"></a>00098     <a class="code" href="class_c_p_array.html">CPArray</a>                 _selectableItems;
<a name="l00099"></a>00099     
<a name="l00100"></a>00100     <a class="code" href="class_c_p_array.html">CPArray</a>                 _items;
<a name="l00101"></a>00101     <a class="code" href="class_c_p_array.html">CPArray</a>                 _itemsSortedByVisibilityPriority;
<a name="l00102"></a>00102     
<a name="l00103"></a>00103     <a class="code" href="class_c_p_view.html">CPView</a>                  _toolbarView;
<a name="l00104"></a>00104     <a class="code" href="class_c_p_window.html">CPWindow</a>                _window;
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="comment">/* @ignore */</span>
<a name="l00108"></a><a class="code" href="class_c_p_toolbar.html#aee3933376aa945d13f26ebb228b02536">00108</a> + (void)initialize
<a name="l00109"></a>00109 {
<a name="l00110"></a>00110     <span class="keywordflow">if</span> (<span class="keyword">self</span> != [<a class="code" href="class_c_p_toolbar.html">CPToolbar</a> <span class="keyword">class</span>])
<a name="l00111"></a>00111         <span class="keywordflow">return</span>;
<a name="l00112"></a>00112         
<a name="l00113"></a>00113     <a class="code" href="_c_p_toolbar_8j.html#aa23158e884bab0d67ff519f2abab8f23">CPToolbarsByIdentifier</a> = [<a class="code" href="class_c_p_dictionary.html">CPDictionary</a> <a class="code" href="class_c_p_dictionary.html#af9820df885270d5200f27f9a539aca28">dictionary</a>];
<a name="l00114"></a>00114     <a class="code" href="_c_p_toolbar_8j.html#ac944978bcf3d19990ce9bb0c430a194f">CPToolbarConfigurationsByIdentifier</a> = [<a class="code" href="class_c_p_dictionary.html">CPDictionary</a> <a class="code" href="class_c_p_dictionary.html#af9820df885270d5200f27f9a539aca28">dictionary</a>];
<a name="l00115"></a>00115 }
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="comment">/* @ignore */</span>
<a name="l00118"></a>00118 + (void)_addToolbar:(<a class="code" href="class_c_p_toolbar.html">CPToolbar</a>)toolbar forIdentifier:(<a class="code" href="class_c_p_string.html">CPString</a>)identifier
<a name="l00119"></a>00119 {
<a name="l00120"></a>00120     var toolbarsSharingIdentifier = [CPToolbarsByIdentifier objectForKey:identifier];
<a name="l00121"></a>00121     
<a name="l00122"></a>00122     <span class="keywordflow">if</span> (!toolbarsSharingIdentifier)
<a name="l00123"></a>00123     {
<a name="l00124"></a>00124         toolbarsSharingIdentifier = []
<a name="l00125"></a>00125         [CPToolbarsByIdentifier setObject:toolbarsSharingIdentifier forKey:identifier];
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127         
<a name="l00128"></a>00128     [toolbarsSharingIdentifier addObject:toolbar];
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00136"></a><a class="code" href="class_c_p_toolbar.html#a075ff6415f286d359018fd6a0841a601">00136</a> - (id)initWithIdentifier:(<a class="code" href="class_c_p_string.html">CPString</a>)anIdentifier
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138     <span class="keyword">self</span> = [<span class="keyword">super</span> init];
<a name="l00139"></a>00139     
<a name="l00140"></a>00140     <span class="keywordflow">if</span> (<span class="keyword">self</span>)
<a name="l00141"></a>00141     {
<a name="l00142"></a>00142         _items = [];
<a name="l00143"></a>00143         
<a name="l00144"></a>00144         _identifier = anIdentifier;
<a name="l00145"></a>00145         _isVisible = YES;
<a name="l00146"></a>00146     
<a name="l00147"></a>00147         [<a class="code" href="class_c_p_toolbar.html">CPToolbar</a> _addToolbar:self forIdentifier:_identifier];
<a name="l00148"></a>00148     }
<a name="l00149"></a>00149     
<a name="l00150"></a>00150     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00151"></a>00151 }
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 
<a name="l00157"></a><a class="code" href="class_c_p_toolbar.html#ae1cbace1b3faef39e9628a08002c8bd7">00157</a> - (void)setDisplayMode:(CPToolbarDisplayMode)aDisplayMode
<a name="l00158"></a>00158 {
<a name="l00159"></a>00159     
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00165"></a><a class="code" href="class_c_p_toolbar.html#ae0ac034f372f634e459b53e54dc77331">00165</a> - (<a class="code" href="class_c_p_string.html">CPString</a>)identifier
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167     <span class="keywordflow">return</span> _identifier;
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00173"></a><a class="code" href="class_c_p_toolbar.html#a70d87ea8392df875075080876a0ea59b">00173</a> - (id)delegate
<a name="l00174"></a>00174 {
<a name="l00175"></a>00175     <span class="keywordflow">return</span> _delegate;
<a name="l00176"></a>00176 }
<a name="l00177"></a>00177 
<a name="l00181"></a><a class="code" href="class_c_p_toolbar.html#a4f3e1d69eb45cc1335cf3bca6f779368">00181</a> - (BOOL)isVisible
<a name="l00182"></a>00182 {
<a name="l00183"></a>00183     <span class="keywordflow">return</span> _isVisible;
<a name="l00184"></a>00184 }
<a name="l00185"></a>00185 
<a name="l00190"></a><a class="code" href="class_c_p_toolbar.html#ae67aa421e6a79f8eaf0e008fe7dbbeb2">00190</a> - (void)setVisible:(BOOL)aFlag
<a name="l00191"></a>00191 {
<a name="l00192"></a>00192     <span class="keywordflow">if</span> (_isVisible === aFlag)
<a name="l00193"></a>00193         <span class="keywordflow">return</span>;
<a name="l00194"></a>00194     
<a name="l00195"></a>00195     _isVisible = aFlag;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     [_window _noteToolbarChanged];
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 - (<a class="code" href="class_c_p_window.html">CPWindow</a>)_window
<a name="l00201"></a>00201 {
<a name="l00202"></a>00202     <span class="keywordflow">return</span> _window;
<a name="l00203"></a>00203 }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 - (void)_setWindow:(<a class="code" href="class_c_p_window.html">CPWindow</a>)aWindow
<a name="l00206"></a>00206 {
<a name="l00207"></a>00207     _window = aWindow;
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00214"></a><a class="code" href="class_c_p_toolbar.html#a62da2f713eb49af75579f5b09187fcc4">00214</a> - (void)setDelegate:(<span class="keywordtype">id</span>)aDelegate
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216     <span class="keywordflow">if</span> (_delegate == aDelegate)
<a name="l00217"></a>00217         <span class="keywordflow">return</span>;
<a name="l00218"></a>00218         
<a name="l00219"></a>00219     _delegate = aDelegate;
<a name="l00220"></a>00220     
<a name="l00221"></a>00221     [<span class="keyword">self</span> _reloadToolbarItems];
<a name="l00222"></a>00222 }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 <span class="comment">/* @ignore */</span>
<a name="l00225"></a>00225 - (void)_loadConfiguration
<a name="l00226"></a>00226 {
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 <span class="comment">/* @ignore */</span>
<a name="l00231"></a>00231 - (<a class="code" href="class_c_p_view.html">CPView</a>)_toolbarView
<a name="l00232"></a>00232 {
<a name="l00233"></a>00233     <span class="keywordflow">if</span> (!_toolbarView)
<a name="l00234"></a>00234     {
<a name="l00235"></a>00235         _toolbarView = [[_CPToolbarView alloc] initWithFrame:CPRectMake(0.0, 0.0, 1200.0, 59.0)];
<a name="l00236"></a>00236         
<a name="l00237"></a>00237         [_toolbarView setToolbar:self];
<a name="l00238"></a>00238         [_toolbarView setAutoresizingMask:CPViewWidthSizable];
<a name="l00239"></a>00239         [_toolbarView reloadToolbarItems];
<a name="l00240"></a>00240     }
<a name="l00241"></a>00241     
<a name="l00242"></a>00242     <span class="keywordflow">return</span> _toolbarView;
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 <span class="comment">/* @ignore */</span>
<a name="l00246"></a>00246 - (void)_reloadToolbarItems
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248     <span class="keywordflow">if</span> (!_delegate)
<a name="l00249"></a>00249         <span class="keywordflow">return</span>;
<a name="l00250"></a>00250 
<a name="l00251"></a>00251     var count = [_itemIdentifiers count];
<a name="l00252"></a>00252     
<a name="l00253"></a>00253     <span class="keywordflow">if</span> (!count)
<a name="l00254"></a>00254     {
<a name="l00255"></a>00255          _itemIdentifiers = [[_delegate toolbarDefaultItemIdentifiers:self] mutableCopy];
<a name="l00256"></a>00256          count = [_itemIdentifiers count];
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     _items = [];
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     var index = 0;
<a name="l00262"></a>00262     
<a name="l00263"></a>00263     <span class="keywordflow">for</span> (; index &lt; count; ++index)
<a name="l00264"></a>00264     {
<a name="l00265"></a>00265         var identifier = _itemIdentifiers[index],
<a name="l00266"></a>00266             item = [<a class="code" href="class_c_p_toolbar_item.html">CPToolbarItem</a> _standardItemWithItemIdentifier:identifier];
<a name="l00267"></a>00267         
<a name="l00268"></a>00268         <span class="keywordflow">if</span> (!item)
<a name="l00269"></a>00269             item = [_delegate toolbar:<span class="keyword">self</span> itemForItemIdentifier:identifier willBeInsertedIntoToolbar:YES];
<a name="l00270"></a>00270         
<a name="l00271"></a>00271         item = [item copy];
<a name="l00272"></a>00272         
<a name="l00273"></a>00273         <span class="keywordflow">if</span> (item == nil)
<a name="l00274"></a>00274             [<a class="code" href="class_c_p_exception.html">CPException</a> <span class="keyword">raise</span>:<a class="code" href="_c_p_exception_8j.html#a6fa23775ddcbf086beab6aebeea123c3">CPInvalidArgumentException</a>
<a name="l00275"></a>00275                          reason:sprintf(<span class="stringliteral">@&quot;_delegate %s returned nil toolbar item returned for identifier %s&quot;</span>, _delegate, identifier)];
<a name="l00276"></a>00276             
<a name="l00277"></a>00277         [_items addObject:item];
<a name="l00278"></a>00278     }
<a name="l00279"></a>00279   
<a name="l00280"></a>00280 <span class="comment">//    _items = [[self _defaultToolbarItems] mutableCopy];</span>
<a name="l00281"></a>00281     
<a name="l00282"></a>00282     <span class="comment">// Store items sorted by priority.  We want items to be removed first at the end of the array,</span>
<a name="l00283"></a>00283     <span class="comment">// items to be removed last at the front.</span>
<a name="l00284"></a>00284     
<a name="l00285"></a>00285     _itemsSortedByVisibilityPriority = [_items sortedArrayUsingFunction:_CPToolbarItemVisibilityPriorityCompare context:NULL];
<a name="l00286"></a>00286     
<a name="l00287"></a>00287     [_toolbarView reloadToolbarItems];
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00293"></a><a class="code" href="class_c_p_toolbar.html#a2806476e334e279547637cb0a34a1176">00293</a> - (<a class="code" href="class_c_p_array.html">CPArray</a>)items
<a name="l00294"></a>00294 {
<a name="l00295"></a>00295     <span class="keywordflow">return</span> _items;
<a name="l00296"></a>00296 }
<a name="l00297"></a>00297 
<a name="l00301"></a><a class="code" href="class_c_p_toolbar.html#a1f81b581bb9cb24c3c5a47c383306d20">00301</a> - (<a class="code" href="class_c_p_array.html">CPArray</a>)visibleItems
<a name="l00302"></a>00302 {
<a name="l00303"></a>00303     <span class="keywordflow">return</span> [_toolbarView visibleItems];
<a name="l00304"></a>00304 }
<a name="l00305"></a>00305 
<a name="l00309"></a><a class="code" href="class_c_p_toolbar.html#a12c7bc6fc4af300629e60d0c7e7f29de">00309</a> - (<a class="code" href="class_c_p_array.html">CPArray</a>)itemsSortedByVisibilityPriority
<a name="l00310"></a>00310 {
<a name="l00311"></a>00311     <span class="keywordflow">return</span> _itemsSortedByVisibilityPriority;
<a name="l00312"></a>00312 }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 <span class="comment">/* @ignore */</span>
<a name="l00315"></a>00315 - (id)_itemForItemIdentifier:(<a class="code" href="class_c_p_string.html">CPString</a>)identifier willBeInsertedIntoToolbar:(BOOL)toolbar
<a name="l00316"></a>00316 {
<a name="l00317"></a>00317     var item = [_identifiedItems objectForKey:identifier];
<a name="l00318"></a>00318     <span class="keywordflow">if</span> (!item)
<a name="l00319"></a>00319     {
<a name="l00320"></a>00320         item = [<a class="code" href="class_c_p_toolbar_item.html">CPToolbarItem</a> _standardItemWithItemIdentifier:identifier];
<a name="l00321"></a>00321         <span class="keywordflow">if</span> (_delegate &amp;&amp; !item)
<a name="l00322"></a>00322         {
<a name="l00323"></a>00323             item = [[_delegate toolbar:self itemForItemIdentifier:identifier willBeInsertedIntoToolbar:toolbar] copy];
<a name="l00324"></a>00324             <span class="keywordflow">if</span> (!item)
<a name="l00325"></a>00325                 [<a class="code" href="class_c_p_exception.html">CPException</a> <span class="keyword">raise</span>:<a class="code" href="_c_p_exception_8j.html#a6fa23775ddcbf086beab6aebeea123c3">CPInvalidArgumentException</a>
<a name="l00326"></a>00326                             reason:sprintf(<span class="stringliteral">@&quot;_delegate %s returned nil toolbar item returned for identifier %s&quot;</span>, _delegate, identifier)];
<a name="l00327"></a>00327         }
<a name="l00328"></a>00328         
<a name="l00329"></a>00329         [_identifiedItems setObject:item forKey:identifier];
<a name="l00330"></a>00330     }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     <span class="keywordflow">return</span> item;
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 <span class="comment">/* @ignore */</span>
<a name="l00336"></a>00336 - (id)_itemsWithIdentifiers:(<a class="code" href="class_c_p_array.html">CPArray</a>)identifiers
<a name="l00337"></a>00337 {   
<a name="l00338"></a>00338     var items = [];
<a name="l00339"></a>00339     <span class="keywordflow">for</span> (var i = 0; i &lt; identifiers.length; i++)
<a name="l00340"></a>00340         [items addObject:[self _itemForItemIdentifier:identifiers[i] willBeInsertedIntoToolbar:NO]];
<a name="l00341"></a>00341 
<a name="l00342"></a>00342     <span class="keywordflow">return</span> items;
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="comment">/* @ignore */</span>
<a name="l00346"></a>00346 -(id)_defaultToolbarItems
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348     <span class="keywordflow">if</span> (!_defaultItems)
<a name="l00349"></a>00349         <span class="keywordflow">if</span> ([_delegate respondsToSelector:<span class="keyword">@selector</span>(toolbarDefaultItemIdentifiers:)])
<a name="l00350"></a>00350             _defaultItems = [<span class="keyword">self</span> _itemsWithIdentifiers:[_delegate toolbarDefaultItemIdentifiers:<span class="keyword">self</span>]];
<a name="l00351"></a>00351     
<a name="l00352"></a>00352     <span class="keywordflow">return</span> _defaultItems;
<a name="l00353"></a>00353 }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 <span class="keyword">@end</span>
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 
<a name="l00358"></a><a class="code" href="_c_p_toolbar_8j.html#adde66db1e1d5cce4b43c28b9638d8ad2">00358</a> var <a class="code" href="_c_p_toolbar_8j.html#adde66db1e1d5cce4b43c28b9638d8ad2">CPToolbarIdentifierKey</a>              = <span class="stringliteral">&quot;CPToolbarIdentifierKey&quot;</span>,
<a name="l00359"></a><a class="code" href="_c_p_toolbar_8j.html#ac6d757764d21a3e9924dc65571c1071e">00359</a>     <a class="code" href="_c_p_toolbar_8j.html#ac6d757764d21a3e9924dc65571c1071e">CPToolbarDisplayModeKey</a>             = <span class="stringliteral">&quot;CPToolbarDisplayModeKey&quot;</span>,
<a name="l00360"></a><a class="code" href="_c_p_toolbar_8j.html#a66bbfb070bd861958ff619853765d42b">00360</a>     <a class="code" href="_c_p_toolbar_8j.html#a66bbfb070bd861958ff619853765d42b">CPToolbarShowsBaselineSeparatorKey</a>  = <span class="stringliteral">&quot;CPToolbarShowsBaselineSeparatorKey&quot;</span>,
<a name="l00361"></a><a class="code" href="_c_p_toolbar_8j.html#ad09032ea924162feb5cd070864ab48f4">00361</a>     <a class="code" href="_c_p_toolbar_8j.html#ad09032ea924162feb5cd070864ab48f4">CPToolbarAllowsUserCustomizationKey</a> = <span class="stringliteral">&quot;CPToolbarAllowsUserCustomizationKey&quot;</span>,
<a name="l00362"></a><a class="code" href="_c_p_toolbar_8j.html#a22654575d0f66c7c213e93fe012f5301">00362</a>     <a class="code" href="_c_p_toolbar_8j.html#a22654575d0f66c7c213e93fe012f5301">CPToolbarIsVisibleKey</a>               = <span class="stringliteral">&quot;CPToolbarIsVisibleKey&quot;</span>,
<a name="l00363"></a><a class="code" href="_c_p_toolbar_8j.html#a8f50d31caf7f350f781e2cf6794764b2">00363</a>     <a class="code" href="_c_p_toolbar_8j.html#a8f50d31caf7f350f781e2cf6794764b2">CPToolbarDelegateKey</a>                = <span class="stringliteral">&quot;CPToolbarDelegateKey&quot;</span>,
<a name="l00364"></a><a class="code" href="_c_p_toolbar_8j.html#a1d7b475a09de39bf21100e309db59d66">00364</a>     <a class="code" href="_c_p_toolbar_8j.html#a1d7b475a09de39bf21100e309db59d66">CPToolbarIdentifiedItemsKey</a>         = <span class="stringliteral">&quot;CPToolbarIdentifiedItemsKey&quot;</span>,
<a name="l00365"></a><a class="code" href="_c_p_toolbar_8j.html#abf39c407be1b5d3b9631a5621a4ca5f2">00365</a>     <a class="code" href="_c_p_toolbar_8j.html#abf39c407be1b5d3b9631a5621a4ca5f2">CPToolbarDefaultItemsKey</a>            = <span class="stringliteral">&quot;CPToolbarDefaultItemsKey&quot;</span>,
<a name="l00366"></a><a class="code" href="_c_p_toolbar_8j.html#a62c468355ffc0fb98e230e5892fc154b">00366</a>     <a class="code" href="_c_p_toolbar_8j.html#a62c468355ffc0fb98e230e5892fc154b">CPToolbarAllowedItemsKey</a>            = <span class="stringliteral">&quot;CPToolbarAllowedItemsKey&quot;</span>,
<a name="l00367"></a><a class="code" href="_c_p_toolbar_8j.html#a7d9ec8c7a4373f28cb4ad4852d73ea8d">00367</a>     <a class="code" href="_c_p_toolbar_8j.html#a7d9ec8c7a4373f28cb4ad4852d73ea8d">CPToolbarSelectableItemsKey</a>         = <span class="stringliteral">&quot;CPToolbarSelectableItemsKey&quot;</span>;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369 <span class="keyword">@implementation </span><a class="code" href="class_c_p_toolbar.html">CPToolbar</a> (CPCoding)
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 <span class="comment">/*</span>
<a name="l00372"></a>00372 <span class="comment">    Initializes the toolbar by unarchiving data from &lt;code&gt;aCoder&lt;/code&gt;.</span>
<a name="l00373"></a>00373 <span class="comment">    @param aCoder the coder containing the archived CPToolbar.</span>
<a name="l00374"></a>00374 <span class="comment">*/</span>
<a name="l00375"></a><a class="code" href="class_c_p_toolbar.html#a9d47e25681ff8cc9b98b60c17d798e40">00375</a> - (id)initWithCoder:(<a class="code" href="class_c_p_coder.html">CPCoder</a>)aCoder
<a name="l00376"></a>00376 {
<a name="l00377"></a>00377     <span class="keyword">self</span> = [<span class="keyword">super</span> init];
<a name="l00378"></a>00378     
<a name="l00379"></a>00379     <span class="keywordflow">if</span> (<span class="keyword">self</span>)
<a name="l00380"></a>00380     {
<a name="l00381"></a>00381         _identifier                 = [aCoder decodeObjectForKey:CPToolbarIdentifierKey];
<a name="l00382"></a>00382         _displayMode                = [aCoder decodeIntForKey:CPToolbarDisplayModeKey];
<a name="l00383"></a>00383         _showsBaselineSeparator     = [aCoder decodeBoolForKey:CPToolbarShowsBaselineSeparatorKey];
<a name="l00384"></a>00384         _allowsUserCustomization    = [aCoder decodeBoolForKey:CPToolbarAllowsUserCustomizationKey];
<a name="l00385"></a>00385         _isVisible                  = [aCoder decodeBoolForKey:CPToolbarIsVisibleKey];
<a name="l00386"></a>00386         
<a name="l00387"></a>00387         _identifiedItems            = [aCoder decodeObjectForKey:CPToolbarIdentifiedItemsKey];
<a name="l00388"></a>00388         _defaultItems               = [aCoder decodeObjectForKey:CPToolbarDefaultItemsKey];
<a name="l00389"></a>00389         _allowedItems               = [aCoder decodeObjectForKey:CPToolbarAllowedItemsKey];
<a name="l00390"></a>00390         _selectableItems            = [aCoder decodeObjectForKey:CPToolbarSelectableItemsKey];
<a name="l00391"></a>00391         
<a name="l00392"></a>00392         _items = [];
<a name="l00393"></a>00393         [<a class="code" href="class_c_p_toolbar.html">CPToolbar</a> _addToolbar:self forIdentifier:_identifier];
<a name="l00394"></a>00394         
<a name="l00395"></a>00395         [<span class="keyword">self</span> <a class="code" href="class_c_p_toolbar.html#a62da2f713eb49af75579f5b09187fcc4">setDelegate</a>:[aCoder decodeObjectForKey:CPToolbarDelegateKey]];
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397     
<a name="l00398"></a>00398     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00399"></a>00399 }
<a name="l00400"></a>00400 
<a name="l00401"></a>00401 <span class="comment">/*</span>
<a name="l00402"></a>00402 <span class="comment">    Archives this toolbar into the provided coder.</span>
<a name="l00403"></a>00403 <span class="comment">    @param aCoder the coder to which the toolbar&apos;s instance data will be written.</span>
<a name="l00404"></a>00404 <span class="comment">*/</span>
<a name="l00405"></a><a class="code" href="class_c_p_toolbar.html#a1e36b531a29789eec049989da1580a2a">00405</a> - (void)encodeWithCoder:(<a class="code" href="class_c_p_coder.html">CPCoder</a>)aCoder
<a name="l00406"></a>00406 {
<a name="l00407"></a>00407     [aCoder encodeObject:_identifier            forKey:CPToolbarIdentifierKey];
<a name="l00408"></a>00408     [aCoder encodeInt:_displayMode              forKey:CPToolbarDisplayModeKey];
<a name="l00409"></a>00409     [aCoder encodeBool:_showsBaselineSeparator  forKey:CPToolbarShowsBaselineSeparatorKey];
<a name="l00410"></a>00410     [aCoder encodeBool:_allowsUserCustomization forKey:CPToolbarAllowsUserCustomizationKey];
<a name="l00411"></a>00411     [aCoder encodeBool:_isVisible               forKey:CPToolbarIsVisibleKey];
<a name="l00412"></a>00412     
<a name="l00413"></a>00413     [aCoder encodeObject:_identifiedItems       forKey:CPToolbarIdentifiedItemsKey];
<a name="l00414"></a>00414     [aCoder encodeObject:_defaultItems          forKey:CPToolbarDefaultItemsKey];
<a name="l00415"></a>00415     [aCoder encodeObject:_allowedItems          forKey:CPToolbarAllowedItemsKey];
<a name="l00416"></a>00416     [aCoder encodeObject:_selectableItems       forKey:CPToolbarSelectableItemsKey];
<a name="l00417"></a>00417     
<a name="l00418"></a>00418     [aCoder encodeConditionalObject:_delegate   forKey:CPToolbarDelegateKey];
<a name="l00419"></a>00419 }
<a name="l00420"></a>00420 
<a name="l00421"></a>00421 <span class="keyword">@end</span>
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 
<a name="l00424"></a>00424 var _CPToolbarViewBackgroundColor = nil,
<a name="l00425"></a>00425     _CPToolbarViewExtraItemsImage = nil,
<a name="l00426"></a>00426     _CPToolbarViewExtraItemsAlternateImage = nil;
<a name="l00427"></a>00427 
<a name="l00428"></a><a class="code" href="_c_p_toolbar_8j.html#a82f7912771e979940bec6abb295bd27b">00428</a> var <a class="code" href="_c_p_toolbar_8j.html#a82f7912771e979940bec6abb295bd27b">TOOLBAR_TOP_MARGIN</a>          = 5.0,
<a name="l00429"></a><a class="code" href="_c_p_toolbar_8j.html#a2e193efd77871d8cdad0147de6bebbdd">00429</a>     <a class="code" href="_c_p_toolbar_8j.html#a2e193efd77871d8cdad0147de6bebbdd">TOOLBAR_ITEM_MARGIN</a>         = 10.0,
<a name="l00430"></a><a class="code" href="_c_p_toolbar_8j.html#a220c12a20bb159ea1540a16935c2df97">00430</a>     <a class="code" href="_c_p_toolbar_8j.html#a220c12a20bb159ea1540a16935c2df97">TOOLBAR_EXTRA_ITEMS_WIDTH</a>   = 20.0;
<a name="l00431"></a>00431 
<a name="l00432"></a>00432 var _CPToolbarItemInfoMake = function(anIndex, aView, aLabel, aMinWidth)
<a name="l00433"></a>00433 {
<a name="l00434"></a>00434     <span class="keywordflow">return</span> { index:anIndex, view:aView, <a class="code" href="_c_p_segmented_control_8j.html#a2949ae0332d03a93977dd5eda0aa6409">label</a>:aLabel, minWidth:aMinWidth };
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="comment">/* @ignore */</span>
<a name="l00438"></a>00438 <span class="keyword">@implementation </span>_CPToolbarView : <a class="code" href="class_c_p_view.html">CPView</a>
<a name="l00439"></a>00439 {
<a name="l00440"></a>00440     <a class="code" href="class_c_p_toolbar.html">CPToolbar</a>           _toolbar;
<a name="l00441"></a>00441     
<a name="l00442"></a>00442     <a class="code" href="class_c_p_index_set.html">CPIndexSet</a>          _flexibleWidthIndexes;
<a name="l00443"></a>00443     <a class="code" href="class_c_p_index_set.html">CPIndexSet</a>          _visibleFlexibleWidthIndexes;
<a name="l00444"></a>00444     
<a name="l00445"></a>00445     <a class="code" href="class_c_p_dictionary.html">CPDictionary</a>        _itemInfos;
<a name="l00446"></a>00446     
<a name="l00447"></a>00447     <a class="code" href="class_c_p_array.html">CPArray</a>             _visibleItems;
<a name="l00448"></a>00448     <a class="code" href="class_c_p_array.html">CPArray</a>             _invisibleItems;
<a name="l00449"></a>00449     
<a name="l00450"></a>00450     <a class="code" href="class_c_p_pop_up_button.html">CPPopUpButton</a>       _additionalItemsButton;
<a name="l00451"></a>00451     CPColor             _labelColor;
<a name="l00452"></a>00452     CPColor             _labelShadowColor;
<a name="l00453"></a>00453     
<a name="l00454"></a>00454     <span class="keywordtype">float</span>               _minWidth;
<a name="l00455"></a>00455 }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 + (void)initialize
<a name="l00458"></a>00458 {
<a name="l00459"></a>00459     <span class="keywordflow">if</span> (<span class="keyword">self</span> != [_CPToolbarView <span class="keyword">class</span>])
<a name="l00460"></a>00460         <span class="keywordflow">return</span>;
<a name="l00461"></a>00461     
<a name="l00462"></a>00462     var bundle = [<a class="code" href="class_c_p_bundle.html">CPBundle</a> <a class="code" href="class_c_p_bundle.html#a6b2401dce4d84d49261126169d966567">bundleForClass</a>:self];
<a name="l00463"></a>00463     
<a name="l00464"></a>00464     _CPToolbarViewExtraItemsImage = [[<a class="code" href="class_c_p_image.html">CPImage</a> alloc] initWithContentsOfFile: [bundle pathForResource:&quot;_CPToolbarView/_CPToolbarViewExtraItemsImage.png&quot;] size: CPSizeMake(10.0, 15.0)];
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     _CPToolbarViewExtraItemsAlternateImage = [[<a class="code" href="class_c_p_image.html">CPImage</a> alloc] initWithContentsOfFile: [bundle pathForResource:&quot;_CPToolbarView/_CPToolbarViewExtraItemsAlternateImage.png&quot;] size:CGSizeMake(10.0, 15.0)];
<a name="l00467"></a>00467 }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 - (id)initWithFrame:(CGRect)aFrame
<a name="l00470"></a>00470 {
<a name="l00471"></a>00471     <span class="keyword">self</span> = [<span class="keyword">super</span> initWithFrame:aFrame];
<a name="l00472"></a>00472     
<a name="l00473"></a>00473     <span class="keywordflow">if</span> (<span class="keyword">self</span>)
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475         _minWidth = 0;
<a name="l00476"></a>00476         
<a name="l00477"></a>00477         _labelColor = [CPColor blackColor];
<a name="l00478"></a>00478         _labelShadowColor = [CPColor colorWithWhite:1.0 alpha:0.75];
<a name="l00479"></a>00479         
<a name="l00480"></a>00480         _additionalItemsButton = [[<a class="code" href="class_c_p_pop_up_button.html">CPPopUpButton</a> alloc] initWithFrame:CGRectMake(0.0, 0.0, 10.0, 15.0) pullsDown:YES];
<a name="l00481"></a>00481         [_additionalItemsButton setBordered:NO];
<a name="l00482"></a>00482 
<a name="l00483"></a>00483         [_additionalItemsButton setImagePosition:CPImageOnly];
<a name="l00484"></a>00484         [[_additionalItemsButton menu] setShowsStateColumn:NO];
<a name="l00485"></a>00485         
<a name="l00486"></a>00486         [_additionalItemsButton setAlternateImage:_CPToolbarViewExtraItemsAlternateImage];
<a name="l00487"></a>00487     }
<a name="l00488"></a>00488     
<a name="l00489"></a>00489     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00490"></a>00490 }
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 - (void)setToolbar:(<a class="code" href="class_c_p_toolbar.html">CPToolbar</a>)aToolbar
<a name="l00493"></a>00493 {
<a name="l00494"></a>00494     _toolbar = aToolbar;
<a name="l00495"></a>00495 }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497 - (<a class="code" href="class_c_p_toolbar.html">CPToolbar</a>)toolbar
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499     <span class="keywordflow">return</span> _toolbar;
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 - (void)setLabelColor:(CPColor)aColor
<a name="l00503"></a>00503 {
<a name="l00504"></a>00504     <span class="keywordflow">if</span> (_labelColor === aColor)
<a name="l00505"></a>00505         <span class="keywordflow">return</span>;
<a name="l00506"></a>00506     
<a name="l00507"></a>00507     _labelColor = aColor;
<a name="l00508"></a>00508     
<a name="l00509"></a>00509     var items = [_toolbar items],
<a name="l00510"></a>00510         count = [items count];
<a name="l00511"></a>00511     
<a name="l00512"></a>00512     <span class="keywordflow">while</span> (count--)
<a name="l00513"></a>00513         [[<span class="keyword">self</span> labelForItem:items[count]] setTextColor:_labelColor];
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516 - (void)setLabelShadowColor:(CPColor)aColor
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518     <span class="keywordflow">if</span> (_labelShadowColor === aColor)
<a name="l00519"></a>00519         <span class="keywordflow">return</span>;
<a name="l00520"></a>00520     
<a name="l00521"></a>00521     _labelShadowColor = aColor;
<a name="l00522"></a>00522     
<a name="l00523"></a>00523     var items = [_toolbar items],
<a name="l00524"></a>00524         count = [items count];
<a name="l00525"></a>00525     
<a name="l00526"></a>00526     <span class="keywordflow">while</span> (count--)
<a name="l00527"></a>00527         [[<span class="keyword">self</span> labelForItem:items[count]] setTextShadowColor:_labelShadowColor];
<a name="l00528"></a>00528 }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530 <span class="comment">// This *should* be roughly O(3N) = O(N)</span>
<a name="l00531"></a>00531 - (void)resizeSubviewsWithOldSize:(CGSize)aSize
<a name="l00532"></a>00532 {
<a name="l00533"></a>00533     [<span class="keyword">self</span> layoutSubviews];
<a name="l00534"></a>00534 }
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 - (void)layoutSubviews
<a name="l00537"></a>00537 {
<a name="l00538"></a>00538     <span class="comment">// We begin by recalculating the visible items.</span>
<a name="l00539"></a>00539     var items = [_toolbar items],
<a name="l00540"></a>00540         <a class="code" href="_c_p_segmented_control_8j.html#a2474a5474cbff19523a51eb1de01cda4">width</a> = <a class="code" href="_c_g_geometry_8j.html#aa310af239f2108c573299b35776996fa">CGRectGetWidth</a>([<span class="keyword">self</span> bounds]),
<a name="l00541"></a>00541         minWidth = _minWidth,
<a name="l00542"></a>00542         flexibleItemIndexes = [<a class="code" href="class_c_p_index_set.html">CPIndexSet</a> <a class="code" href="class_c_p_index_set.html#a339845eb2d96fae878209105dde5e140">indexSet</a>],
<a name="l00543"></a>00543         <span class="comment">// FIXME: This should be a CPSet.</span>
<a name="l00544"></a>00544         invisibleItemsSortedByPriority = [];
<a name="l00545"></a>00545     
<a name="l00546"></a>00546     _visibleItems = items;
<a name="l00547"></a>00547     
<a name="l00548"></a>00548     <span class="comment">// We only have hidden items if our actual width is smaller than our </span>
<a name="l00549"></a>00549     <span class="comment">// minimum width for hiding items.</span>
<a name="l00550"></a>00550     <span class="keywordflow">if</span> (<a class="code" href="_c_p_segmented_control_8j.html#a2474a5474cbff19523a51eb1de01cda4">width</a> &lt; minWidth)
<a name="l00551"></a>00551     {
<a name="l00552"></a>00552         <a class="code" href="_c_p_segmented_control_8j.html#a2474a5474cbff19523a51eb1de01cda4">width</a> -= <a class="code" href="_c_p_toolbar_8j.html#a220c12a20bb159ea1540a16935c2df97">TOOLBAR_EXTRA_ITEMS_WIDTH</a>;
<a name="l00553"></a>00553                 
<a name="l00554"></a>00554         _visibleItems = [_visibleItems copy];
<a name="l00555"></a>00555         
<a name="l00556"></a>00556         var itemsSortedByVisibilityPriority = [_toolbar itemsSortedByVisibilityPriority],
<a name="l00557"></a>00557             count = itemsSortedByVisibilityPriority.length;
<a name="l00558"></a>00558         
<a name="l00559"></a>00559         <span class="comment">// While our items take up too much space...</span>
<a name="l00560"></a>00560         <span class="keywordflow">while</span> (minWidth &gt; <a class="code" href="_c_p_segmented_control_8j.html#a2474a5474cbff19523a51eb1de01cda4">width</a>)
<a name="l00561"></a>00561         {
<a name="l00562"></a>00562             var item = itemsSortedByVisibilityPriority[count--];
<a name="l00563"></a>00563             
<a name="l00564"></a>00564             minWidth -= [self minWidthForItem:item] + TOOLBAR_ITEM_MARGIN;
<a name="l00565"></a>00565             
<a name="l00566"></a>00566             [_visibleItems removeObjectIdenticalTo:item];
<a name="l00567"></a>00567             [invisibleItemsSortedByPriority addObject:item];
<a name="l00568"></a>00568             
<a name="l00569"></a>00569             [[<span class="keyword">self</span> viewForItem:item] setHidden:YES];
<a name="l00570"></a>00570             [[<span class="keyword">self</span> labelForItem:item] setHidden:YES];
<a name="l00571"></a>00571         }
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574     <span class="comment">// Determine all the items that have flexible width.</span>
<a name="l00575"></a>00575     <span class="comment">// Also determine the height of the toolbar.</span>
<a name="l00576"></a>00576     <span class="comment">// NOTE: height is height without top margin, and bottom margin/label.</span>
<a name="l00577"></a>00577     var index = _visibleItems.length,
<a name="l00578"></a>00578         height = 0.0;
<a name="l00579"></a>00579 
<a name="l00580"></a>00580     <span class="keywordflow">while</span> (index--)
<a name="l00581"></a>00581     {
<a name="l00582"></a>00582         var item = _visibleItems[index],
<a name="l00583"></a>00583             minSize = [item minSize],
<a name="l00584"></a>00584             view = [<span class="keyword">self</span> viewForItem:item];
<a name="l00585"></a>00585         
<a name="l00586"></a>00586         <span class="keywordflow">if</span> (minSize.width != [item maxSize].width)
<a name="l00587"></a>00587             [flexibleItemIndexes addIndex:index];
<a name="l00588"></a>00588         
<a name="l00589"></a>00589         <span class="comment">// If the item doesn&apos;t have flexible width, then make sure it&apos;s set to the static width (min==max)</span>
<a name="l00590"></a>00590         <span class="comment">// This handles the case where the user did setView: with a view of a different size than minSize/maxSize</span>
<a name="l00591"></a>00591         <span class="keywordflow">else</span>
<a name="l00592"></a>00592             [view setFrameSize:CGSizeMake([item minSize].width, CGRectGetHeight([view frame]))];
<a name="l00593"></a>00593 
<a name="l00594"></a>00594         <span class="comment">// FIXME: minHeight?</span>
<a name="l00595"></a>00595 
<a name="l00596"></a>00596         [view setHidden:NO];
<a name="l00597"></a>00597         [[<span class="keyword">self</span> labelForItem:item] setHidden:NO];
<a name="l00598"></a>00598         
<a name="l00599"></a>00599         <span class="keywordflow">if</span> (height &lt; minSize.height)
<a name="l00600"></a>00600             height = minSize.height;
<a name="l00601"></a>00601     }
<a name="l00602"></a>00602     
<a name="l00603"></a>00603     var remainingSpace = <a class="code" href="_c_p_segmented_control_8j.html#a2474a5474cbff19523a51eb1de01cda4">width</a> - minWidth,
<a name="l00604"></a>00604         proportionate = 0.0;
<a name="l00605"></a>00605 
<a name="l00606"></a>00606     <span class="comment">// Continue to distribute space proportionately while we have it, </span>
<a name="l00607"></a>00607     <span class="comment">// and there are flexible items left that want it. (Those with max </span>
<a name="l00608"></a>00608     <span class="comment">// widths may eventually not want it anymore).</span>
<a name="l00609"></a>00609     <span class="keywordflow">while</span> (remainingSpace &amp;&amp; [flexibleItemIndexes count])
<a name="l00610"></a>00610     {
<a name="l00611"></a>00611         <span class="comment">// Divy out the space.</span>
<a name="l00612"></a>00612         proportionate += remainingSpace / [flexibleItemIndexes count];
<a name="l00613"></a>00613         
<a name="l00614"></a>00614         <span class="comment">// Reset the remaining space to 0</span>
<a name="l00615"></a>00615         remainingSpace = 0.0;
<a name="l00616"></a>00616         
<a name="l00617"></a>00617         var index = <a class="code" href="_c_p_obj_j_runtime_8j.html#a84e3be579b365cc2c1559e1a1f469238">CPNotFound</a>;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619         <span class="keywordflow">while</span> ((index = [flexibleItemIndexes indexGreaterThanIndex:index]) != <a class="code" href="_c_p_obj_j_runtime_8j.html#a84e3be579b365cc2c1559e1a1f469238">CPNotFound</a>)
<a name="l00620"></a>00620         {
<a name="l00621"></a>00621             var item = _visibleItems[index];
<a name="l00622"></a>00622                 view = [<span class="keyword">self</span> viewForItem:item],
<a name="l00623"></a>00623                 viewFrame = [view frame],
<a name="l00624"></a>00624                 <span class="comment">// FIXME: Should this be minWidthForItem: ?</span>
<a name="l00625"></a>00625                 proposedWidth = [item minSize].width + proportionate,
<a name="l00626"></a>00626                 constrainedWidth = <a class="code" href="_c_p_obj_j_runtime_8j.html#a4fca277171215842609dc38a6f0c19fb">MIN</a>(proposedWidth, [item maxSize].<a class="code" href="_c_p_segmented_control_8j.html#a2474a5474cbff19523a51eb1de01cda4">width</a>);
<a name="l00627"></a>00627             
<a name="l00628"></a>00628             <span class="keywordflow">if</span> (constrainedWidth &lt; proposedWidth)
<a name="l00629"></a>00629             {
<a name="l00630"></a>00630                 [flexibleItemIndexes removeIndex:index];
<a name="l00631"></a>00631                 
<a name="l00632"></a>00632                 remainingSpace += proposedWidth - constrainedWidth;
<a name="l00633"></a>00633             }
<a name="l00634"></a>00634             
<a name="l00635"></a>00635             [view setFrameSize:CGSizeMake(constrainedWidth, CGRectGetHeight(viewFrame))];
<a name="l00636"></a>00636         }
<a name="l00637"></a>00637     }
<a name="l00638"></a>00638     
<a name="l00639"></a>00639     <span class="comment">// Now that all the visible items are the correct width, position them accordingly.</span>
<a name="l00640"></a>00640     var count = _visibleItems.length,
<a name="l00641"></a>00641         x = <a class="code" href="_c_p_toolbar_8j.html#a2e193efd77871d8cdad0147de6bebbdd">TOOLBAR_ITEM_MARGIN</a>,
<a name="l00642"></a>00642         fullHeightItems = [];
<a name="l00643"></a>00643 
<a name="l00644"></a>00644     <span class="keywordflow">for</span> (index = 0; index &lt; count; ++index)
<a name="l00645"></a>00645     {
<a name="l00646"></a>00646         var item = _visibleItems[index],
<a name="l00647"></a>00647             view = [<span class="keyword">self</span> viewForItem:item],
<a name="l00648"></a>00648             
<a name="l00649"></a>00649             viewFrame = [view frame],
<a name="l00650"></a>00650             viewWidth = <a class="code" href="_c_g_geometry_8j.html#aa310af239f2108c573299b35776996fa">CGRectGetWidth</a>(viewFrame),
<a name="l00651"></a>00651             
<a name="l00652"></a>00652             <a class="code" href="_c_p_segmented_control_8j.html#a2949ae0332d03a93977dd5eda0aa6409">label</a> = [<span class="keyword">self</span> labelForItem:item],
<a name="l00653"></a>00653             labelFrame = [label frame],
<a name="l00654"></a>00654             labelWidth = <a class="code" href="_c_g_geometry_8j.html#aa310af239f2108c573299b35776996fa">CGRectGetWidth</a>(labelFrame),
<a name="l00655"></a>00655             
<a name="l00656"></a>00656             itemWidth = <a class="code" href="_c_p_obj_j_runtime_8j.html#a45f5f88d061da0c18bcb6b6a854fe898">MAX</a>([<span class="keyword">self</span> minWidthForItem:item], viewWidth),
<a name="l00657"></a>00657             
<a name="l00658"></a>00658             viewHeight = <a class="code" href="_c_g_geometry_8j.html#a09d2072d60c7f39b04a41705d640fa98">CGRectGetHeight</a>(viewFrame);
<a name="l00659"></a>00659 
<a name="l00660"></a>00660         <span class="comment">// itemWidth != viewWidth.  itemWidth is MAX(size of view, size of label).  If the label is larger,</span>
<a name="l00661"></a>00661         <span class="comment">// *center* the view, don&apos;t resize it.</span>
<a name="l00662"></a>00662         [view setFrame:CGRectMake(x + (itemWidth - viewWidth) / 2.0, TOOLBAR_TOP_MARGIN + (height - viewHeight) / 2.0, viewWidth, viewHeight)];
<a name="l00663"></a>00663         [label setFrameOrigin:CGPointMake(x + (itemWidth - labelWidth) / 2.0, TOOLBAR_TOP_MARGIN + height + 2.0)];
<a name="l00664"></a>00664 
<a name="l00665"></a>00665         x += itemWidth + <a class="code" href="_c_p_toolbar_8j.html#a2e193efd77871d8cdad0147de6bebbdd">TOOLBAR_ITEM_MARGIN</a>;
<a name="l00666"></a>00666         
<a name="l00667"></a>00667         <span class="keywordflow">if</span> ([item itemIdentifier] == <a class="code" href="_c_p_toolbar_item_8j.html#ab4346682b7fa0ca58bf1d953b1dadab1">CPToolbarSeparatorItemIdentifier</a>)
<a name="l00668"></a>00668             fullHeightItems.push(item);
<a name="l00669"></a>00669     }
<a name="l00670"></a>00670     
<a name="l00671"></a>00671     <span class="keywordflow">for</span> (index = 0, count = fullHeightItems.length; index &lt; count; ++index)
<a name="l00672"></a>00672     {
<a name="l00673"></a>00673         var view = [<span class="keyword">self</span> viewForItem:fullHeightItems[index]],
<a name="l00674"></a>00674             viewHeight = 53.0;
<a name="l00675"></a>00675         
<a name="l00676"></a>00676         <span class="comment">// FIXME: Variable Height</span>
<a name="l00677"></a>00677         [view setFrame:CGRectMake(CGRectGetMinX([view frame]), (59.0 - viewHeight) / 2.0, CGRectGetWidth([view frame]), viewHeight)];
<a name="l00678"></a>00678     }
<a name="l00679"></a>00679 
<a name="l00680"></a>00680     <span class="keywordflow">if</span> ([invisibleItemsSortedByPriority count])
<a name="l00681"></a>00681     {
<a name="l00682"></a>00682         var index = 0,
<a name="l00683"></a>00683             count = [items count];
<a name="l00684"></a>00684             
<a name="l00685"></a>00685         _invisibleItems = [];
<a name="l00686"></a>00686         
<a name="l00687"></a>00687         <span class="keywordflow">for</span> (; index &lt; count; ++index)
<a name="l00688"></a>00688         {
<a name="l00689"></a>00689             var item = items[index];
<a name="l00690"></a>00690             
<a name="l00691"></a>00691             <span class="keywordflow">if</span> ([invisibleItemsSortedByPriority indexOfObjectIdenticalTo:item] != <a class="code" href="_c_p_obj_j_runtime_8j.html#a84e3be579b365cc2c1559e1a1f469238">CPNotFound</a>)
<a name="l00692"></a>00692                 [_invisibleItems addObject:item];
<a name="l00693"></a>00693         }
<a name="l00694"></a>00694         
<a name="l00695"></a>00695         [_additionalItemsButton setFrameOrigin:CGPointMake(width + 5.0, (CGRectGetHeight([<span class="keyword">self</span> bounds]) - CGRectGetHeight([_additionalItemsButton frame])) / 2.0)];
<a name="l00696"></a>00696         
<a name="l00697"></a>00697         [<span class="keyword">self</span> addSubview:_additionalItemsButton];
<a name="l00698"></a>00698         
<a name="l00699"></a>00699         [_additionalItemsButton removeAllItems];
<a name="l00700"></a>00700         
<a name="l00701"></a>00701         var index = 0,
<a name="l00702"></a>00702             count = [_invisibleItems count];
<a name="l00703"></a>00703 
<a name="l00704"></a>00704         [_additionalItemsButton addItemWithTitle:@&quot;Additional Items&quot;];
<a name="l00705"></a>00705         [[_additionalItemsButton itemArray][0] setImage:_CPToolbarViewExtraItemsImage];
<a name="l00706"></a>00706         
<a name="l00707"></a>00707         <span class="keywordflow">for</span> (; index &lt; count; ++index)
<a name="l00708"></a>00708         {
<a name="l00709"></a>00709             var item = _invisibleItems[index];
<a name="l00710"></a>00710             
<a name="l00711"></a>00711             [_additionalItemsButton addItemWithTitle:[item label]];
<a name="l00712"></a>00712             
<a name="l00713"></a>00713             var menuItem = [_additionalItemsButton itemArray][index + 1];
<a name="l00714"></a>00714             
<a name="l00715"></a>00715             [menuItem setImage:[item image]];
<a name="l00716"></a>00716             
<a name="l00717"></a>00717             [menuItem setTarget:[item target]];
<a name="l00718"></a>00718             [menuItem setAction:[item action]];
<a name="l00719"></a>00719         }
<a name="l00720"></a>00720     }
<a name="l00721"></a>00721     <span class="keywordflow">else</span>
<a name="l00722"></a>00722         [_additionalItemsButton removeFromSuperview];
<a name="l00723"></a>00723     
<a name="l00724"></a>00724 }
<a name="l00725"></a>00725 
<a name="l00726"></a>00726 - (<a class="code" href="class_c_p_view.html">CPView</a>)viewForItem:(<a class="code" href="class_c_p_toolbar_item.html">CPToolbarItem</a>)anItem
<a name="l00727"></a>00727 {
<a name="l00728"></a>00728     var info = [_itemInfos objectForKey:[anItem hash]];
<a name="l00729"></a>00729     
<a name="l00730"></a>00730     <span class="keywordflow">if</span> (!info)
<a name="l00731"></a>00731         <span class="keywordflow">return</span> nil;
<a name="l00732"></a>00732     
<a name="l00733"></a>00733     <span class="keywordflow">return</span> info.view;
<a name="l00734"></a>00734 }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736 - (<a class="code" href="class_c_p_text_field.html">CPTextField</a>)labelForItem:(<a class="code" href="class_c_p_toolbar_item.html">CPToolbarItem</a>)anItem
<a name="l00737"></a>00737 {
<a name="l00738"></a>00738     var info = [_itemInfos objectForKey:[anItem hash]];
<a name="l00739"></a>00739     
<a name="l00740"></a>00740     <span class="keywordflow">if</span> (!info)
<a name="l00741"></a>00741         <span class="keywordflow">return</span> nil;
<a name="l00742"></a>00742     
<a name="l00743"></a>00743     <span class="keywordflow">return</span> info.label;
<a name="l00744"></a>00744 }
<a name="l00745"></a>00745 
<a name="l00746"></a>00746 - (float)minWidthForItem:(<a class="code" href="class_c_p_toolbar_item.html">CPToolbarItem</a>)anItem
<a name="l00747"></a>00747 {
<a name="l00748"></a>00748     var info = [_itemInfos objectForKey:[anItem hash]];
<a name="l00749"></a>00749     
<a name="l00750"></a>00750     <span class="keywordflow">if</span> (!info)
<a name="l00751"></a>00751         <span class="keywordflow">return</span> 0;
<a name="l00752"></a>00752     
<a name="l00753"></a>00753     <span class="keywordflow">return</span> info.minWidth;
<a name="l00754"></a>00754 }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756 - (void)reloadToolbarItems
<a name="l00757"></a>00757 {
<a name="l00758"></a>00758     <span class="comment">// Get rid of all our current subviews.</span>
<a name="l00759"></a>00759     var subviews = [<span class="keyword">self</span> subviews],
<a name="l00760"></a>00760         count = subviews.length;
<a name="l00761"></a>00761     
<a name="l00762"></a>00762     <span class="keywordflow">while</span> (count--)
<a name="l00763"></a>00763         [subviews[count] removeFromSuperview];
<a name="l00764"></a>00764     
<a name="l00765"></a>00765     <span class="comment">// Populate with new subviews.</span>
<a name="l00766"></a>00766     var items = [_toolbar items],
<a name="l00767"></a>00767         index = 0;
<a name="l00768"></a>00768     
<a name="l00769"></a>00769     count = items.length;
<a name="l00770"></a>00770         
<a name="l00771"></a>00771     _itemInfos = [<a class="code" href="class_c_p_dictionary.html">CPDictionary</a> <a class="code" href="class_c_p_dictionary.html#af9820df885270d5200f27f9a539aca28">dictionary</a>];
<a name="l00772"></a>00772     _minWidth = <a class="code" href="_c_p_toolbar_8j.html#a2e193efd77871d8cdad0147de6bebbdd">TOOLBAR_ITEM_MARGIN</a>;
<a name="l00773"></a>00773 
<a name="l00774"></a>00774     <span class="keywordflow">for</span> (; index &lt; count; ++index)
<a name="l00775"></a>00775     {
<a name="l00776"></a>00776         var item = items[index],
<a name="l00777"></a>00777             view = [item view];
<a name="l00778"></a>00778         
<a name="l00779"></a>00779         <span class="comment">// If this item doesn&apos;t have a custom view, create a standard one.</span>
<a name="l00780"></a>00780         <span class="keywordflow">if</span> (!view)
<a name="l00781"></a>00781         {
<a name="l00782"></a>00782             view = [[<a class="code" href="class_c_p_button.html">CPButton</a> alloc] initWithFrame:CGRectMake(0.0, 0.0, 32.0, 32.0)];
<a name="l00783"></a>00783         
<a name="l00784"></a>00784             [view setBordered:NO];
<a name="l00785"></a>00785             
<a name="l00786"></a>00786             [view setImage:[item image]];
<a name="l00787"></a>00787             [view setAlternateImage:[item alternateImage]];
<a name="l00788"></a>00788             
<a name="l00789"></a>00789             [view setTarget:[item target]];
<a name="l00790"></a>00790             [view setAction:[item action]];
<a name="l00791"></a>00791             
<a name="l00792"></a>00792             [view setTag:[item tag]];
<a name="l00793"></a>00793         
<a name="l00794"></a>00794             [view setImagePosition:CPImageOnly];
<a name="l00795"></a>00795         }
<a name="l00796"></a>00796                
<a name="l00797"></a>00797         [<span class="keyword">self</span> addSubview:view];
<a name="l00798"></a>00798         
<a name="l00799"></a>00799         <span class="comment">// Create a lable for this item.</span>
<a name="l00800"></a>00800         var <a class="code" href="_c_p_segmented_control_8j.html#a2949ae0332d03a93977dd5eda0aa6409">label</a> = [[<a class="code" href="class_c_p_text_field.html">CPTextField</a> alloc] initWithFrame:CGRectMakeZero()];
<a name="l00801"></a>00801         
<a name="l00802"></a>00802         [label setStringValue:[item label]];
<a name="l00803"></a>00803         [label setFont:[<a class="code" href="class_c_p_font.html">CPFont</a> <a class="code" href="class_c_p_font.html#acc46c8f9ff7da14a2cf974d048ce80bd">systemFontOfSize</a>:11.0]];
<a name="l00804"></a>00804         [label setTextColor:_labelColor];
<a name="l00805"></a>00805         [label setTextShadowColor:_labelShadowColor];
<a name="l00806"></a>00806         [label setTextShadowOffset:CGSizeMake(0, 1)];
<a name="l00807"></a>00807         [label sizeToFit];
<a name="l00808"></a>00808 
<a name="l00809"></a>00809         [label setTarget:[item target]];
<a name="l00810"></a>00810         [label setAction:[item action]];
<a name="l00811"></a>00811 
<a name="l00812"></a>00812         [<span class="keyword">self</span> addSubview:label];
<a name="l00813"></a>00813         
<a name="l00814"></a>00814         var minSize = [item minSize],
<a name="l00815"></a>00815             minWidth = <a class="code" href="_c_p_obj_j_runtime_8j.html#a45f5f88d061da0c18bcb6b6a854fe898">MAX</a>(minSize.width, <a class="code" href="_c_g_geometry_8j.html#aa310af239f2108c573299b35776996fa">CGRectGetWidth</a>([label <a class="code" href="_c_p_segmented_control_8j.html#a63fcc9e0dd97e8502cce685e88234e16">frame</a>]));
<a name="l00816"></a>00816             
<a name="l00817"></a>00817         [_itemInfos setObject:_CPToolbarItemInfoMake(index, view, label, minWidth) forKey:[item hash]];
<a name="l00818"></a>00818         
<a name="l00819"></a>00819         _minWidth += minWidth + <a class="code" href="_c_p_toolbar_8j.html#a2e193efd77871d8cdad0147de6bebbdd">TOOLBAR_ITEM_MARGIN</a>;
<a name="l00820"></a>00820         
<a name="l00821"></a>00821         <span class="comment">// If the minSize is different than the maxSize, then this item has flexible width.</span>
<a name="l00822"></a>00822         <span class="comment">//if (minSize.width != [item maxSize].width)</span>
<a name="l00823"></a>00823         <span class="comment">//    [_flexibleWidthIndexes addIndex:index];</span>
<a name="l00824"></a>00824     }
<a name="l00825"></a>00825     
<a name="l00826"></a>00826     [<span class="keyword">self</span> layoutSubviews];
<a name="l00827"></a>00827 }
<a name="l00828"></a>00828 
<a name="l00829"></a>00829 <span class="keyword">@end</span>
<a name="l00830"></a>00830 
<a name="l00831"></a>00831 <span class="comment">/* @ignore */</span>
<a name="l00832"></a>00832 var _CPToolbarItemVisibilityPriorityCompare = function(lhs, rhs)
<a name="l00833"></a>00833 {
<a name="l00834"></a>00834     var lhsVisibilityPriority = [lhs visibilityPriority],
<a name="l00835"></a>00835         rhsVisibilityPriority = [rhs visibilityPriority];
<a name="l00836"></a>00836         
<a name="l00837"></a>00837     <span class="keywordflow">if</span> (lhsVisibilityPriority == rhsVisibilityPriority)
<a name="l00838"></a>00838         <span class="keywordflow">return</span> <a class="code" href="_c_p_obj_j_runtime_8j.html#af6563f83ad093188bcbdba78aa1848c5">CPOrderedSame</a>;
<a name="l00839"></a>00839     
<a name="l00840"></a>00840     <span class="keywordflow">if</span> (lhsVisibilityPriority &gt; rhsVisibilityPriority)
<a name="l00841"></a>00841         <span class="keywordflow">return</span> <a class="code" href="_c_p_obj_j_runtime_8j.html#a3e9b85c1be28d3092262626ffcf41993">CPOrderedAscending</a>;
<a name="l00842"></a>00842     
<a name="l00843"></a>00843     <span class="keywordflow">return</span> <a class="code" href="_c_p_obj_j_runtime_8j.html#aad9efd5d7748d296944239adb552f67c">CPOrderedDescending</a>;
<a name="l00844"></a>00844 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0,'all')"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1,'classes')"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2,'files')"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3,'functions')"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4,'variables')"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5,'defines')"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<a href="javascript:searchBox.CloseResultsWindow()" 
   id="MSearchResultsWindowClose"
   onmouseover="return searchBox.OnCloseHighlight(true)"
   onmouseout="return searchBox.OnCloseHighlight(false)"><img border="0" src="search/close.png" alt=""/></a>
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Sun Jul 5 21:41:28 2009 for Cappuccino by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.5.9-20090622 </small></address>
</body>
</html>
